<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AnasUpload â€” Ø±ÙØ¹ ØµÙˆØ±Ø© + Ø±Ø§Ø¨Ø· Ù…Ø¨Ø§Ø´Ø± + HTML</title>
  <style>
    :root{
      --bg1:#0b1020;
      --bg2:#070a12;
      --card: rgba(255,255,255,.06);
      --card2: rgba(255,255,255,.08);
      --stroke: rgba(255,255,255,.12);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.65);
      --shadow: 0 18px 60px rgba(0,0,0,.35);
      --radius: 18px;
    }

    *{ box-sizing: border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      color:var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Kufi Arabic", sans-serif;
      background:
        radial-gradient(1100px 700px at 15% 15%, rgba(124,58,237,.35), transparent 60%),
        radial-gradient(900px 600px at 85% 20%, rgba(56,189,248,.25), transparent 55%),
        radial-gradient(900px 700px at 55% 95%, rgba(34,197,94,.18), transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      padding: 24px;
    }

    .wrap{
      max-width: 980px;
      margin: 0 auto;
    }

    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      margin-bottom: 18px;
    }

    .brand{
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .brand h1{
      margin:0;
      font-size: 22px;
      letter-spacing:.2px;
    }
    .brand p{
      margin:0;
      color:var(--muted);
      font-size: 14px;
      line-height: 1.6;
    }

    .grid{
      display:grid;
      gap:16px;
      grid-template-columns: 1.2fr .8fr;
    }

    @media (max-width: 900px){
      .grid{ grid-template-columns: 1fr; }
    }

    .card{
      background: linear-gradient(180deg, var(--card2), var(--card));
      border: 1px solid var(--stroke);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    .card-header{
      padding: 16px 16px 10px;
      border-bottom: 1px solid rgba(255,255,255,.08);
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 10px;
    }

    .card-header h2{
      margin:0;
      font-size: 16px;
    }
    .card-header small{
      color: var(--muted);
      display:block;
      margin-top: 6px;
      line-height: 1.6;
      font-size: 12.5px;
    }

    .card-body{ padding: 16px; }

    .drop{
      border: 1px dashed rgba(255,255,255,.25);
      border-radius: 14px;
      padding: 16px;
      min-height: 210px;
      display:flex;
      align-items:center;
      justify-content:center;
      position: relative;
      transition: .2s ease;
      background: rgba(255,255,255,.03);
      outline: none;
    }
    .drop.dragover{
      border-color: rgba(56,189,248,.7);
      background: rgba(56,189,248,.08);
      transform: translateY(-1px);
    }

    .drop-inner{
      width:100%;
      display:flex;
      gap: 14px;
      align-items:center;
      justify-content: space-between;
      flex-wrap: wrap;
    }

    .hint{
      display:flex;
      flex-direction:column;
      gap:8px;
      flex: 1 1 300px;
      min-width: 260px;
    }
    .hint .title{
      font-size: 15px;
      margin:0;
    }
    .hint .sub{
      margin:0;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.6;
    }

    .actions{
      display:flex;
      gap:10px;
      flex-wrap: wrap;
      justify-content:flex-end;
      flex: 1 1 240px;
      min-width: 240px;
    }

    .btn{
      appearance:none;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.06);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 12px;
      cursor:pointer;
      transition: .15s ease;
      font-weight: 600;
      font-size: 14px;
      display:inline-flex;
      align-items:center;
      gap: 8px;
      user-select:none;
    }
    .btn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.09); }
    .btn:active{ transform: translateY(0px); }
    .btn.primary{
      border-color: rgba(124,58,237,.55);
      background: linear-gradient(135deg, rgba(124,58,237,.35), rgba(56,189,248,.18));
    }
    .btn.good{
      border-color: rgba(34,197,94,.55);
      background: linear-gradient(135deg, rgba(34,197,94,.25), rgba(16,185,129,.15));
    }
    .btn.warn{
      border-color: rgba(244,63,94,.55);
      background: rgba(244,63,94,.08);
    }
    .btn:disabled{
      opacity:.55;
      cursor:not-allowed;
      transform:none;
    }

    input[type="file"]{ display:none; }

    .preview{
      display:flex;
      gap: 14px;
      align-items:center;
      margin-top: 14px;
      padding-top: 14px;
      border-top: 1px solid rgba(255,255,255,.08);
    }
    .thumb{
      width: 84px;
      height: 84px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      overflow:hidden;
      flex: 0 0 auto;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .thumb img{
      width:100%;
      height:100%;
      object-fit: cover;
      display:none;
    }
    .meta{
      flex:1 1 auto;
      min-width: 200px;
    }
    .meta .name{
      margin:0;
      font-size: 14px;
      font-weight: 700;
    }
    .meta .info{
      margin:6px 0 0;
      color: var(--muted);
      font-size: 12.5px;
      line-height: 1.6;
    }

    .field{
      display:flex;
      flex-direction:column;
      gap:8px;
    }

    .label{
      font-size: 12.5px;
      color: var(--muted);
    }

    .mono{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
    }

    .row{
      display:flex;
      gap:10px;
      flex-wrap: wrap;
      align-items:center;
    }

    .out{
      width:100%;
      padding: 11px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      color: var(--text);
      outline: none;
    }

    textarea.out{
      min-height: 190px;
      resize: vertical;
      direction: ltr;
    }

    .toast{
      position: fixed;
      bottom: 18px;
      left: 18px;
      right: 18px;
      display:flex;
      justify-content:center;
      pointer-events:none;
    }
    .toast > div{
      pointer-events:auto;
      background: rgba(0,0,0,.55);
      border: 1px solid rgba(255,255,255,.14);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 14px;
      box-shadow: var(--shadow);
      display:none;
      max-width: 820px;
      width: fit-content;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      font-size: 14px;
    }

    .progress{
      height: 10px;
      background: rgba(255,255,255,.07);
      border: 1px solid rgba(255,255,255,.10);
      border-radius: 999px;
      overflow:hidden;
      margin-top: 12px;
      display:none;
    }
    .bar{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(56,189,248,.9), rgba(124,58,237,.9));
      transition: width .2s ease;
    }

    a.link{
      color: rgba(56,189,248,.95);
      text-decoration: none;
      border-bottom: 1px dashed rgba(56,189,248,.35);
    }
  </style>
</head>
<body>
  <div class="wrap">

    <div class="topbar">
      <div class="brand">
        <h1>AnasUpload</h1>
        <p>Ø§Ø±ÙØ¹ ØµÙˆØ±Ø© ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ <b>Ø±Ø§Ø¨Ø· Ù…Ø¨Ø§Ø´Ø±</b> + ØªÙˆÙ„ÙŠØ¯ <b>HTML ÙƒØ§Ù…Ù„</b>. ÙŠØ¯Ø¹Ù… Ø§Ù„Ø±ÙØ¹ØŒ Ø§Ù„Ø³Ø­Ø¨ ÙˆØ§Ù„Ø¥ÙÙ„Ø§ØªØŒ ÙˆØ§Ù„Ù€ <b>Paste</b> Ù…Ù† Ø§Ù„ÙƒÙŠØ¨ÙˆØ±Ø¯.</p>
      </div>
      <button class="btn warn" id="resetBtn" title="Ù…Ø³Ø­">
        â™»ï¸ Ù…Ø³Ø­
      </button>
    </div>

    <div class="grid">
      <div class="card">
        <div class="card-header">
          <div>
            <h2>Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±Ø©</h2>
            <small>
              â€¢ Ø§Ø±ÙØ¹ Ù…Ù„Ù ÙŠØ¯ÙˆÙŠÙ‹Ø§<br>
              â€¢ Ø£Ùˆ Ø§Ø³Ø­Ø¨ ÙˆØ£ÙÙ„Øª Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø±Ø¨Ø¹<br>
              â€¢ Ø£Ùˆ Ø§Ù„ØµÙ‚ ØµÙˆØ±Ø© Ø¨Ø§Ù„ÙƒÙŠØ¨ÙˆØ±Ø¯: Ctrl+V / Cmd+V
            </small>
          </div>
        </div>

        <div class="card-body">
          <div class="drop" id="drop" tabindex="0" aria-label="Ù…Ù†Ø·Ù‚Ø© Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©">
            <div class="drop-inner">
              <div class="hint">
                <p class="title">Ø§Ø³Ø­Ø¨ Ø§Ù„ØµÙˆØ±Ø© Ù‡Ù†Ø§ Ø£Ùˆ Ø§Ù„ØµÙ‚Ù‡Ø§ Ø£Ùˆ Ø§Ø®ØªØ±Ù‡Ø§ Ù…Ù† Ø¬Ù‡Ø§Ø²Ùƒ</p>
                <p class="sub">Ù†ØµÙŠØ­Ø©: Ø§Ø¶ØºØ· Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø«Ù… Ctrl+V Ù„Ù„ØµÙ‚ ØµÙˆØ±Ø© Ù…Ù† Ø§Ù„Ø­Ø§ÙØ¸Ø©.</p>
              </div>

              <div class="actions">
                <label class="btn" for="file">
                  ğŸ“ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø©
                </label>
                <button class="btn primary" id="uploadBtn" disabled>
                  â¬†ï¸ Ø±ÙØ¹ ÙˆØªÙˆÙ„ÙŠØ¯
                </button>
              </div>

              <input type="file" id="file" accept="image/*" />
            </div>
          </div>

          <div class="progress" id="progress">
            <div class="bar" id="bar"></div>
          </div>

          <div class="preview" id="preview" style="display:none;">
            <div class="thumb">
              <img id="thumbImg" alt="preview">
              <span id="thumbPlaceholder" style="color:var(--muted); font-size:12px;">Preview</span>
            </div>
            <div class="meta">
              <p class="name" id="fileName">â€”</p>
              <p class="info" id="fileInfo">â€”</p>
            </div>
            <div class="actions">
              <button class="btn good" id="copyDirectBtn" disabled>ğŸ”— Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·</button>
              <button class="btn good" id="copyHtmlBtn" disabled>ğŸ“„ Ù†Ø³Ø® HTML</button>
            </div>
          </div>

          <small style="display:block; color:var(--muted); margin-top: 10px;">
            Ù…Ù„Ø§Ø­Ø¸Ø©: Ø£Ù†Øª ØªØ³ØªØ®Ø¯Ù… imgbb (Ø·Ø±Ù Ø«Ø§Ù„Ø«). Ù„Ùˆ ØªØ¨ØºÙ‰ ØªØ­ÙƒÙ… Ø£ÙƒØ«Ø± (ØªØ­ÙˆÙŠÙ„ Ù„ØµÙŠØºØ© PNG Ø¯Ø§Ø¦Ù…Ù‹Ø§) Ø§Ø³ØªØ®Ø¯Ù… Cloudinary.
          </small>
        </div>
      </div>

      <div class="card">
        <div class="card-header">
          <div>
            <h2>Ø§Ù„Ù†ØªØ§Ø¦Ø¬</h2>
            <small>Ø¨Ø¹Ø¯ Ø§Ù„Ø±ÙØ¹ Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· ÙˆØ§Ù„ÙƒÙˆØ¯.</small>
          </div>
        </div>

        <div class="card-body">
          <div class="field">
            <div class="row" style="justify-content:space-between;">
              <span class="label">Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</span>
              <button class="btn" id="openDirectBtn" disabled>ğŸŒ ÙØªØ­</button>
            </div>
            <input class="out mono" id="directUrl" readonly placeholder="Ø³ÙŠØ¸Ù‡Ø± Ø§Ù„Ø±Ø§Ø¨Ø· Ù‡Ù†Ø§..." />
          </div>

          <div style="height:12px;"></div>

          <div class="field">
            <div class="row" style="justify-content:space-between;">
              <span class="label">HTML ÙƒØ§Ù…Ù„</span>
              <button class="btn" id="downloadHtmlBtn" disabled>â¬‡ï¸ ØªØ­Ù…ÙŠÙ„ .html</button>
            </div>
            <textarea class="out mono" id="htmlCode" readonly placeholder="Ø³ÙŠØ¸Ù‡Ø± ÙƒÙˆØ¯ HTML Ù‡Ù†Ø§..."></textarea>
          </div>

          <div style="height:10px;"></div>

          <small style="display:block; color:var(--muted); line-height:1.7">
            Ù„Ùˆ ÙˆØ§Ø¬Ù‡Øª Ù…Ø´ÙƒÙ„Ø© CORS Ø£Ùˆ Ø§Ù„Ø±ÙØ¹ Ù…Ø§ Ø§Ø´ØªØºÙ„ Ø¹Ù„Ù‰ Ø¨Ø¹Ø¶ Ø§Ù„Ù…ØªØµÙØ­Ø§ØªØŒ Ø¬Ø±Ù‘Ø¨ ÙØªØ­ Ø§Ù„ØµÙØ­Ø© Ù…Ù† GitHub Pages Ø¨Ø¯Ù„ ÙØªØ­Ù‡Ø§ ÙƒÙ…Ù„Ù Ù…Ø­Ù„ÙŠ.
          </small>
        </div>
      </div>
    </div>

    <div style="height:18px;"></div>
    <small style="color:var(--muted); display:block; text-align:center;">
      Ø§Ø®ØªØµØ§Ø± Ù„ØµÙ‚ Ø§Ù„ØµÙˆØ±Ø©: <span class="mono">Ctrl+V</span> / <span class="mono">Cmd+V</span> Ø¯Ø§Ø®Ù„ Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø±ÙØ¹.
    </small>
  </div>

  <div class="toast"><div id="toast"></div></div>

<script>
  const API_KEY = "659f11c9ce462ad799f67a4bab2e75e1";

  const drop = document.getElementById('drop');
  const fileInput = document.getElementById('file');
  const uploadBtn = document.getElementById('uploadBtn');
  const resetBtn = document.getElementById('resetBtn');

  const preview = document.getElementById('preview');
  const thumbImg = document.getElementById('thumbImg');
  const thumbPlaceholder = document.getElementById('thumbPlaceholder');
  const fileNameEl = document.getElementById('fileName');
  const fileInfoEl = document.getElementById('fileInfo');

  const directUrlEl = document.getElementById('directUrl');
  const htmlCodeEl = document.getElementById('htmlCode');

  const copyDirectBtn = document.getElementById('copyDirectBtn');
  const copyHtmlBtn = document.getElementById('copyHtmlBtn');
  const openDirectBtn = document.getElementById('openDirectBtn');
  const downloadHtmlBtn = document.getElementById('downloadHtmlBtn');

  const progress = document.getElementById('progress');
  const bar = document.getElementById('bar');

  const toastEl = document.getElementById('toast');

  let currentFile = null;
  let lastDirectUrl = '';
  let lastHtml = '';

  function toast(msg){
    toastEl.textContent = msg;
    toastEl.style.display = 'block';
    clearTimeout(toastEl._t);
    toastEl._t = setTimeout(()=> toastEl.style.display = 'none', 2200);
  }

  function formatBytes(bytes){
    if (!Number.isFinite(bytes)) return 'â€”';
    const units = ['B','KB','MB','GB'];
    let i=0, v=bytes;
    while(v>=1024 && i<units.length-1){ v/=1024; i++; }
    return `${v.toFixed(i===0?0:2)} ${units[i]}`;
  }

  function setSelectedFile(file){
    currentFile = file;

    if(!file){
      uploadBtn.disabled = true;
      preview.style.display = 'none';
      thumbImg.style.display = 'none';
      thumbPlaceholder.style.display = 'inline';
      fileNameEl.textContent = 'â€”';
      fileInfoEl.textContent = 'â€”';
      return;
    }

    uploadBtn.disabled = false;

    fileNameEl.textContent = file.name || 'pasted-image.png';
    fileInfoEl.textContent = `${file.type || 'image/*'} â€¢ ${formatBytes(file.size || 0)}`;

    // preview
    const url = URL.createObjectURL(file);
    thumbImg.src = url;
    thumbImg.onload = ()=> URL.revokeObjectURL(url);
    thumbImg.style.display = 'block';
    thumbPlaceholder.style.display = 'none';
    preview.style.display = 'flex';

    // reset outputs
    directUrlEl.value = '';
    htmlCodeEl.value = '';
    lastDirectUrl = '';
    lastHtml = '';
    copyDirectBtn.disabled = true;
    copyHtmlBtn.disabled = true;
    openDirectBtn.disabled = true;
    downloadHtmlBtn.disabled = true;
  }

  async function fileToBase64(file){
    return new Promise((resolve, reject)=>{
      const reader = new FileReader();
      reader.onload = ()=> resolve(String(reader.result).split(',')[1]);
      reader.onerror = reject;
      reader.readAsDataURL(file);
    });
  }

  function startProgress(){
    progress.style.display = 'block';
    bar.style.width = '10%';
    let p = 10;
    bar._int = setInterval(()=>{
      p = Math.min(92, p + Math.random()*10);
      bar.style.width = p.toFixed(0) + '%';
    }, 250);
  }
  
  function stopProgress(ok=true){
    clearInterval(bar._int);
    bar.style.width = ok ? '100%' : '0%';
    setTimeout(()=>{ progress.style.display='none'; bar.style.width='0%'; }, 600);
  }

  async function upload(){
    if(!currentFile){
      toast('Ø§Ø®ØªØ±/Ø§Ù„ØµÙ‚ ØµÙˆØ±Ø© Ø£ÙˆÙ„Ø§Ù‹');
      return;
    }

    uploadBtn.disabled = true;
    uploadBtn.textContent = '... Ø¬Ø§Ø±Ù Ø§Ù„Ø±ÙØ¹';
    startProgress();

    try{
      const base64 = await fileToBase64(currentFile);
      const form = new FormData();
      form.append('image', base64);

      const res = await fetch(`https://api.imgbb.com/1/upload?key=${encodeURIComponent(API_KEY)}`, {
        method: 'POST',
        body: form
      });

      const data = await res.json();

      if(!data || !data.success){
        console.error(data);
        throw new Error(data?.error?.message || 'ÙØ´Ù„ Ø§Ù„Ø±ÙØ¹');
      }

      // direct link
      const direct = data.data.image.url;
      lastDirectUrl = direct;
      directUrlEl.value = direct;

      // full html
      lastHtml = `<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ØµÙˆØ±Ø© Ù…Ø±ÙÙˆØ¹Ø©</title>
  <style>
    body{font-family:system-ui; padding:24px; background:#0b1020; color:#fff;}
    img{max-width:100%; height:auto; border-radius:16px; border:1px solid rgba(255,255,255,.18);}
  </style>
</head>
<body>
  <h1>Ø§Ù„ØµÙˆØ±Ø©</h1>
  <img src="${direct}" alt="Uploaded image" />
</body>
</html>`;
      htmlCodeEl.value = lastHtml;

      copyDirectBtn.disabled = false;
      copyHtmlBtn.disabled = false;
      openDirectBtn.disabled = false;
      downloadHtmlBtn.disabled = false;

      toast('ØªÙ… Ø§Ù„Ø±ÙØ¹ âœ…');
      
      // Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù†Ø³Ø® Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø¨Ø§Ø´Ø±ØŒ Ù‚Ù… Ø¨Ø¥Ø²Ø§Ù„Ø© Ø¹Ù„Ø§Ù…Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ‚ (//) Ù…Ù† Ø§Ù„Ø³Ø·Ø± Ø§Ù„ØªØ§Ù„ÙŠ:
      // copyText(lastDirectUrl); 

      stopProgress(true);
    }catch(e){
      stopProgress(false);
      toast('Ø®Ø·Ø£: ' + (e.message || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'));
    }finally{
      uploadBtn.textContent = 'â¬†ï¸ Ø±ÙØ¹ ÙˆØªÙˆÙ„ÙŠØ¯';
      uploadBtn.disabled = !currentFile;
    }
  }

  // Copy
  async function copyText(text){
    if(!text) return;
    await navigator.clipboard.writeText(text);
    toast('ØªÙ… Ø§Ù„Ù†Ø³Ø® âœ…');
  }

  // Download html
  function downloadHtmlFile(){
    if(!lastHtml) return;
    const blob = new Blob([lastHtml], {type:'text/html;charset=utf-8'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'image.html';
    document.body.appendChild(a);
    a.click();
    a.remove();
    setTimeout(()=> URL.revokeObjectURL(url), 1500);
  }

  // Events: file picker
  fileInput.addEventListener('change', () => {
    const f = fileInput.files && fileInput.files[0];
    if(f){
      setSelectedFile(f);
      upload(); // â† ÙŠØ¨Ø¯Ø£ Ø§Ù„Ø±ÙØ¹ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
    }
  });

  // Events: drag & drop
  ['dragenter','dragover'].forEach(ev=>{
    drop.addEventListener(ev, (e)=>{
      e.preventDefault();
      e.stopPropagation();
      drop.classList.add('dragover');
    });
  });
  ['dragleave','drop'].forEach(ev=>{
    drop.addEventListener(ev, (e)=>{
      e.preventDefault();
      e.stopPropagation();
      drop.classList.remove('dragover');
    });
  });

  drop.addEventListener('drop', (e)=>{
    const f = e.dataTransfer.files && e.dataTransfer.files[0];
    if(f && f.type && f.type.startsWith('image/')){
      setSelectedFile(f);
      toast('ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØµÙˆØ±Ø© ÙˆØ¬Ø§Ø±ÙŠ Ø§Ù„Ø±ÙØ¹...');
      upload(); // â† Ø±ÙØ¹ ØªÙ„Ù‚Ø§Ø¦ÙŠ
    }else{
      toast('Ø§Ø³Ø­Ø¨ Ù…Ù„Ù ØµÙˆØ±Ø© ÙÙ‚Ø·');
    }
  });

  // Events: paste (Ctrl+V / Cmd+V)
  function handlePaste(e){
    const items = e.clipboardData && e.clipboardData.items;
    if(!items) return;

    for(const item of items){
      if(item.type && item.type.startsWith('image/')){
        const blob = item.getAsFile();
        if(blob){
          const file = new File([blob], 'pasted-image.png', { type: blob.type || 'image/png' });
          setSelectedFile(file);
          toast('ØªÙ… Ù„ØµÙ‚ Ø§Ù„ØµÙˆØ±Ø© ÙˆØ¬Ø§Ø±ÙŠ Ø§Ù„Ø±ÙØ¹...');
          upload(); // â† Ø±ÙØ¹ ØªÙ„Ù‚Ø§Ø¦ÙŠ
          e.preventDefault();
          return;
        }
      }
    }
  }

  document.addEventListener('paste', handlePaste);
  drop.addEventListener('paste', handlePaste);

  // Buttons
  uploadBtn.addEventListener('click', upload);
  copyDirectBtn.addEventListener('click', ()=> copyText(lastDirectUrl));
  copyHtmlBtn.addEventListener('click', ()=> copyText(lastHtml));
  openDirectBtn.addEventListener('click', ()=>{
    if(lastDirectUrl) window.open(lastDirectUrl, '_blank', 'noopener,noreferrer');
  });
  downloadHtmlBtn.addEventListener('click', downloadHtmlFile);

  resetBtn.addEventListener('click', ()=>{
    fileInput.value = '';
    setSelectedFile(null);
    directUrlEl.value = '';
    htmlCodeEl.value = '';
    lastDirectUrl = '';
    lastHtml = '';
    copyDirectBtn.disabled = true;
    copyHtmlBtn.disabled = true;
    openDirectBtn.disabled = true;
    downloadHtmlBtn.disabled = true;
    toast('ØªÙ… Ø§Ù„Ù…Ø³Ø­');
  });

  // UX: click focus for paste
  drop.addEventListener('click', ()=> drop.focus());
</script>
</body>
</html>
